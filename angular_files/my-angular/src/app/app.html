<div class="form-container">

  <h2>{{ mode === 'register' ? 'Registration' : 'Login' }}</h2>

  <!-- REGISTER -->
  <div *ngIf="mode === 'register'">

    <label>Username</label>
    <input [(ngModel)]="regUsername">

    <label>Email</label>
    <input type="email" [(ngModel)]="regEmail">

    <label>Password</label>
    <input type="password" [(ngModel)]="regPassword">

    <label>Confirm Password</label>
    <input type="password" [(ngModel)]="regConfirmPassword">

    <label>Captcha</label>
    <div class="captcha-box">
      <div class="captcha-text captcha-noise">
        <span *ngFor="let c of regCaptcha.split(''); let i=index"
          [style.transform]="'rotate(' + (i % 2 === 0 ? -12 : 12) + 'deg)'">
          {{ c }}
        </span>
      </div>
      <button type="button" class="refresh-btn" (click)="generateRegCaptcha()">↻</button>
    </div>

    <label>Enter Captcha</label>
    <input [(ngModel)]="regUserCaptcha">

    <button (click)="register()">Register</button>

    <div class="switch" (click)="switchMode('login')">
      Already registered? Login
    </div>

    <p class="success" *ngIf="regSuccess">{{ regMessage }}</p>
    <p class="error" *ngIf="!regSuccess && regMessage">{{ regMessage }}</p>
  </div>

  <!-- LOGIN -->
  <div *ngIf="mode === 'login'">

    <label>Username</label>
    <input [(ngModel)]="loginUsername">

    <label>Email</label>
    <input type="email" [(ngModel)]="loginEmail">

    <label>Password</label>
    <input type="password" [(ngModel)]="loginPassword">

    <label>Captcha</label>
    <div class="captcha-box">
      <div class="captcha-text captcha-noise">
        <span *ngFor="let c of loginCaptcha.split(''); let i=index"
          [style.transform]="'rotate(' + (i % 2 === 0 ? -12 : 12) + 'deg)'">
          {{ c }}
        </span>
      </div>
      <button type="button" class="refresh-btn" (click)="generateLoginCaptcha()">↻</button>
    </div>

    <label>Enter Captcha</label>
    <input [(ngModel)]="loginUserCaptcha">

    <button (click)="login()">Login</button>

    <div class="switch" (click)="switchMode('register')">
      New user? Register
    </div>

    <p class="success" *ngIf="loginSuccess">{{ loginMessage }}</p>
    <p class="error" *ngIf="!loginSuccess && loginMessage">{{ loginMessage }}</p>
  </div>

</div>